<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>NLP标注工具</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="referrer" content="always">
            <meta name="description" content="自然语言处理标注工具集，囊括了命名识别、词性标注、文本分类等工具.">
            <meta name="google-site-verification" content="v54MPBu58qrHnfxrRsj7LxNKGde9LDNFpdmK_voKT6U">
            <meta property="og:type" content="website">
            <meta property="og:site_name" content="NLP标注">
            <meta property="og:url" content="">
            <meta property="og:title" content="Live Demo · Prodigy · An annotation tool for AI, Machine Learning &amp; NLP">
            <meta property="og:description" content="A downloadable annotation tool for NLP and computer vision tasks such as named entity recognition, text classification, object detection, image segmentation, A/B evaluation and more.">
            <meta property="og:image" content="">
            <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="@explosion_ai">
            <meta name="twitter:title" content="Live Demo · Prodigy · An annotation tool for AI, Machine Learning &amp; NLP">
            <meta name="twitter:description" content="A downloadable annotation tool for NLP and computer vision tasks such as named entity recognition, text classification, object detection, image segmentation, A/B evaluation and more.">
            <meta property="og:image" content="">
            <link rel="shortcut icon" href="">
            <link rel="icon" type="image/x-icon" href="">
            <link href="/static/css/nlp_tag_tool_style.css" rel="stylesheet">
            <style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1178 {
  color: inherit;
  margin: 10px 0 0 0;
  display: flex;
  font-size: 16px;
  align-items: center;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  text-transform: uppercase;
}
.c1179 {
  width: 100%;
  height: 10px;
  background: #384451;
}
.c1179::-webkit-progress-value {
  background: #c8f39f;
}
.c1179::-webkit-progress-bar {
  background: #384451;
}
.c1179::-moz-progress-bar {
  background: #c8f39f;
}
.c1179::-ms-fill {
  background: #fff;
}
.total_progress {
  width: 100%;
  height: 10px;
  background: #384451;
}
.total_progress::-webkit-progress-value {
  background: #7bd7f3;
}
.total_progress::-webkit-progress-bar {
  background: #384451;
}
.total_progress::-moz-progress-bar {
  background: #7bd7f3;
}
.total_progress::-ms-fill {
  background: #fff;
}
.c1180 {
  text-align: right;
  margin-left: 10px;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1175 {
  top: 0;
  left: 0;
  width: 100%;
  color: #fff;
  z-index: 10;
  display: none;
  padding: 5px 10px;
  position: fixed;
  flex-wrap: nowrap;
  font-size: 14px;
  background: #54606e;
  align-items: center;
  font-family: "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif;
  flex-direction: row;
  justify-content: space-between;
}
.c1176 {
  width: 30px;
  cursor: pointer;
  height: 30px;
  margin-right: 10px;
}
.c1176:focus {
  outline: 1px dotted currentColor;
}
.c1177 {
  flex: 100%;
  padding-left: 10%;
}
@media(max-width: 935px) {
  .c1175 {
    display: flex;
  }
}
</style><style type="text/css" data-jss="" data-meta="t, Unthemed, Static">

</style><style type="text/css" data-jss="" data-meta="Component, Themed, Static">
.c0137 {
    color: inherit;
    margin: 0 3px;
    display: inline;
    padding: 5px 8px;
    background: #ffe184;
    font-weight: bold;
    line-height: 1;
    -webkit-box-decoration-break: clone;
    font-size: 20px;
}
.c3157 {
    color: #583fcf;
    font-size: 14px;
    font-weight: bold;
    font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
    margin-left: 8px;
    text-transform: uppercase;
    vertical-align: middle;
}
.delete_button {
    top: -9px;
    left: -9px;
    color: #fff;
    width: 18px;
    height: 18px;
    display: block;
    opacity: 0;
    position: absolute;
    font-size: 0.95em;
    background: #444;
    text-align: center;
    transition: opacity 0.1s ease;
    font-family: sans-serif;
    line-height: 1.1;
    border-radius: 50%;
}
.left_side_main_menu_container {
  padding: 0 17.5px 20px 17.5px;
}
.left_side_main_menu_container:not(:last-child) {
  border-bottom: 1px solid #384451;
  margin-bottom: 17.5px;
}
.c1182 {
  flex: 1;
  min-height: 150px;
  overflow-y: auto;
}
.c1183 {
  display: flex;
  text-align: right;
  line-height: 1.5;
  justify-content: space-between;
}
.c1184 {
  cursor: pointer;
}
.c1185 {
  color: #b9b9b9;
  font-size: 14px;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  margin-right: 10px;
  text-transform: uppercase;
}
</style><style type="text/css" data-jss="" data-meta="Component, Themed, Static">
.c1186 {
  padding: 0 17.5px 20px 17.5px;
}
.c1186:not(:last-child) {
  border-bottom: 1px solid #384451;
  margin-bottom: 17.5px;
}
.c1187 {
  flex: 1;
  min-height: 150px;
  overflow-y: auto;
}
.left_side_sub_menu_container {
  display: flex;
  text-align: right;
  line-height: 2.0;
  justify-content: space-between;
}
.c1189 {
  cursor: pointer;
}
.c1190 {
  color: #b9b9b9;
  font-size: 14px;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  margin-right: 10px;
  text-transform: uppercase;
}
</style><style type="text/css" data-jss="" data-meta="Component, Themed, Static">
.c0151:hover .delete_button {
    opacity: 1;
}

.c1191 {
  padding: 0 17.5px 20px 17.5px;
}
.c1191:not(:last-child) {
  border-bottom: 1px solid #384451;
  margin-bottom: 17.5px;
}
.c1192 {
  flex: 1;
  min-height: 150px;
  overflow-y: auto;
}
.c1193 {
  display: flex;
  text-align: right;
  line-height: 1.5;
  justify-content: space-between;
}
.c1194 {
  cursor: pointer;
}
.left_side_sub_menu {
  color: #b9b9b9;
  font-size: 13px;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  margin-right: 10px;
  text-transform: uppercase;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1159 {
  flex: 0 0 300px;
  width: 300px;
  height: 100vh;
  min-height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;
}
.c1160 {
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  z-index: 30;
  position: fixed;
  background: rgba(0, 0, 0, 0.35);
  align-items: center;
  justify-content: center;
}
.c1161 {
  color: #fff;
  width: 300px;
  z-index: 30;
  transform: translateX(-100%);
  font-size: 14px;
  transition: transform 0.2s ease;
  background: #54606e;
  overflow-x: hidden;
  min-height: 100vh;
  max-height: 100vh;
  overflow-y: auto;
  font-family: "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif;
  border-right: none;
}
@supports(flex-wrap: nowrap) {
  .c1161 {
    display: flex;
    flex-wrap: nowrap;
    flex-direction: column;
  }
}
.c1163 {
  flex: 0 0 50px;
  display: flex;
  padding: 15px 20px;
  background: #384451;
  align-items: center;
  margin-bottom: 20px;
  justify-content: space-between;
}
.c1164 {
  display: flex;
}
.c1165 {
  cursor: pointer;
  margin-left: 15px;
}
.c1165:focus {
  outline: 1px dotted currentColor;
}
.c1165:not(:last-child) {
  margin-right: 12.5px;
}
.c1166 {
  display: none;
}
.c1167 {
  color: #4fd364;
}
.c1168 {
  color: #f74c4a;
}
.c1169 {
  color: #b9b9b9;
}
*:not(:hover) .c1170 {
  color: inherit;
}
.c1171 {
  overflow: hidden;
  min-width: 0;
  text-align: left;
  white-space: nowrap;
  padding-right: 10px;
  text-overflow: ellipsis;
}
.copyright {
  padding: 0 17.5px 17.5px;
  font-size: 12px;
  color: #66ffff;
}
.copyright > *:not(:first-child) {
  margin-left: 10px;
}
.copyright a {
  text-decoration: none;
}
.left_side_main_menu {
  color: #fff;
  font-size: 16px;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  margin-bottom: 10px;
  text-transform: uppercase;
}
.c1174 {
  top: 0;
  left: 0;
  z-index: 10;
  position: sticky;
  background: #54606e;
}
.history_records {
    display: flex;
    text-align: right;
    line-height: 1.5;
    justify-content: space-between;
    color: #fff;
    font-size: 10px;
    font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
}
@media(min-width: 936px) {
  .c1161 {
    transform: none;
  }
}
@media(max-width: 935px) {
  .c1159 {
    flex: 0;
  }
  .c1160 {
    display: block;
  }
  .c1161 {
    transform: none;
  }
  .c1162 {
    z-index: 30;
    position: absolute;
  }
  .c1166 {
    display: block;
  }
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1197 {
  flex: 100%;
  color: #444;
  position: relative;
  max-width: 100%;
  background: #f6f6f6;
  max-height: 100vh;
  overflow-y: auto;
  font-family: "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.5;
}
.c1198 {
  padding: 0 15px;
  padding-bottom: 150px;
}
.c1199 {
  color: #6e6e6e;
  margin: 80px 80px 0;
  font-size: 40px;
  text-align: center;
  text-shadow: 1 1 0 #fff;
}
.c11100 {
  font-size: 20px;
  margin-top: 10px;
}
.c11101 {
  width: 100%;
  right: 0;
  bottom: 0;
  outline: 0;
  position: fixed;
  padding-left: 260px;
}
@supports(width: calc(1% - 1px)) {
  .c11101 {
    width: 100%;
    padding-left: 0;
  }
}
.c11102:after {
  content: ".";
  animation: loading 1s ease alternate infinite;
}
@-webkit-keyframes loading {
  60% {
    text-shadow: 10px 0 0 currentColor;
  }
  100% {
    text-shadow: 10px 0 0 currentColor, 20px 0 0 currentColor;
  }
}
@media(max-width: 935px) {
  .c1198 {
    margin-top: 60px;
  }
}
@media(min-width: 936px) {
@supports(width: calc(1% - 1px)) {
  .c11101 {
    width: calc(100% - 260px);
  }
}
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1155 {
  top: 0;
  right: 30px;
  width: 275px;
  z-index: 200;
  position: absolute;
}
.c1156 {
  color: #fff;
  cursor: pointer;
  padding: 20px;
  font-size: 14px;
  background: #b9b9b9;
  margin-top: 20px;
  font-family: "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif;
  font-weight: bold;
  border-radius: 1em;
}
.c1157 {
  background: #f74c4a;
}
.c1158 {
  background: #4fd364;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1153 {
  width: 100%;
  height: 100%;
  display: flex;
  flex-wrap: nowrap;
  max-width: 100%;
  min-height: 100vh;
  overflow-y: hidden;
  flex-direction: row;
}
.c1154 {
  outline: 0;
}
* {
  border: 0;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
html {
  overflow: hidden;
  font-size: 10px;
  text-rendering: optimizeSpeed;
  -ms-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
}
body {
  width: 100%;
  height: 100%;
}
[tabindex="-1"]:focus {
  outline: 0;
}
button {
  color: inherit;
  cursor: pointer;
  background: transparent;
  border-radius: 0;
  -webkit-appearance: none;
}
progress {
  -webkit-appearance: none;
}
a {
  color: currentColor;
  text-decoration: underline;
}
svg {
  fill: currentColor;
}
table {
  width: 100%;
  text-align: left;
  border-collapse: collapse;
}
th {
  padding: 5px 10px;
}
td {
  padding: 5px 10px;
}
.slideIn-enter, .slideIn-appear, .slideIn-leave.slideIn-leave-active {
  transform: translateY(-100%);
  transition: transform 0.1s linear;
}
.slideInSubtle-enter, .slideInSubtle-appear, .slideInSubtle-leave.slideInSubtle-leave-active {
  transform: translateY(-0.5rem);
  transition: transform 0.1s ease;
}
.slideOut-leave.slideOut-leave-active {
  transform: translateY(-100%);
  transition: transform 0.5s ease;
}
.slideIn-leave, .slideIn-enter.slideIn-enter-active, .slideIn-appear.slideIn-appear-active, .slideInSubtle-leave, .slideInSubtle-enter.slideInSubtle-enter-active, .slideInSubtle-appear.slideInSubtle-appear-active, .slideOut-leave {
  transform: none;
}
@font-face {
  font-family: 'Lato';
  font-style: normal;
  font-weight: normal;
  src: url('/fonts/lato-regular.woff2') format('woff2'), url('/fonts/lato-regular.woff') format('woff');
}
@font-face {
  font-family: 'Lato';
  font-style: normal;
  font-weight: bold;
  src: url('/fonts/lato-bold.woff2') format('woff2'), url('/fonts/lato-bold.woff') format('woff');
}
@font-face {
  font-family: 'Roboto Condensed';
  font-style: normal;
  font-weight: bold;
  src: url('/fonts/robotocondensed-bold.woff2') format('woff2'), url('/fonts/robotocondensed-bold.woff') format('woff');
}
@font-face {
  font-family: 'Roboto Condensed';
  font-style: italic;
  font-weight: bold;
  src: url('/fonts/robotocondensed-bolditalic.woff2') format('woff2'), url('/fonts/robotocondensed-bolditalic.woff') format('woff');
}
@font-face {
  font-family: 'Share Tech Mono';
  font-style: normal;
  font-weight: normal;
  src: url('/fonts/sharetechmono-regular.woff2') format('woff2'), url('/fonts/sharetechmono-regular.woff') format('woff');
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c11103 {
  color: #fff;
  right: 30px;
  width: 275px;
  border: 1px solid #ddd;
  bottom: 30px;
  z-index: 200;
  padding: 20px;
  position: absolute;
  font-size: 14px;
  background: #54606e;
  font-family: "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif;
  border-radius: 10px;
}
.c11104 {
  top: 10px;
  right: 10px;
  cursor: pointer;
  position: absolute;
}
@media(max-width: 52em) {
  .c11103 {
    bottom: 130px;
  }
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c1196 {
  color: #444;
  width: 130px;
  height: 22px;
  border: none;
  padding: 0 2.5px;
  font-size: 14px;
  background: #fff;
  font-family: inherit;
  border-radius: 4px;
  margin-bottom: 10px;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0126 {
  top: 0;
  right: 0;
  border: none;
  padding: 3px 3px 3px 5px;
  opacity: 0.5;
  position: absolute;
  background: #fff;
  transition: opacity 0.1s ease;
  border-bottom-left-radius: 10px;
}
.c0127 {
  color: #f74c4a;
  opacity: 1;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0143 {
  color: #6e6e6e;
  padding: 3px 10px 3px;
  font-size: 12px;
  background: #f6f6f6;
  text-align: right;
  margin-left: auto;
  border-top-left-radius: 10px;
  border-bottom-right-radius: 0;
}
.c0143 > *:not(:first-child) {
  margin-left: 10px;
}
.c0144 {
  color: inherit;
}
</style><style type="text/css" data-jss="" data-meta="Component, Themed, Static">
.c0130 {
  width: 100%;
  font-size: 20px;
  word-wrap: break-word;
  white-space: pre-wrap;
}
.c0130:focus {
  outline: 0;
}
.c0130:empty {
  display: none;
}
.c0130 iframe, .c0130 img {
  maxwidth: 100%;
}
.c0131 {
  padding: 20px;
  text-align: center;
}
.c0132 {
  border-top: 1px solid #ddd;
}
.c0133 {
  font-size: 20px;
}
.c0134 {
  font-size: 24px;
}
<style type="text/css" data-jss="" data-meta="Component, Themed, Static">
.c2257 {
  color: #583fcf;
  font-size: 8px;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  margin-left: 8px;
  text-transform: uppercase;
  vertical-align: middle;
}
.c0158 {
  margin-left: 0;
  vertical-align: baseline;
}
</style>
</style><style type="text/css" data-jss="" data-meta="Component, Themed, Static">
.c0147 {
  padding: 20px;
  line-height: 2;
}
.c2149 {
  margin: 0 3px;
  display: inline-block;
  font-size: 20px;
}
.c0155 {
  width: 100%;
  color: #fff;
  padding: 15px 20px;
  font-size: 20px;
  background: #583fcf;
  text-align: center;
  box-sizing: border-box;
  font-weight: bold;
  font-family: "Roboto Condensed", "Arial Narrow", sans-serif;
  text-transform: uppercase;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0156 {
  display: flex;
  flex-wrap: wrap;
}
.c0156:focus {
  outline: 0;
}
.c0157 {
  margin: 5px 10px 5px 0;
  border: 1px solid;
  cursor: pointer;
  display: block;
  padding: 1px 10px;
  position: relative;
  border-radius: 4px;
}
.c0158 {
  color: #583fcf;
  background: #fff;
}
.c0159 {
  font-size: 12.5px;
  margin-left: 7px;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0145 {
  width: 100%;
}
.c0145 *::selection {
  background: #ffe184;
}
.c0145 *::-moz-selection {
  background: #ffe184;
}
.c0146 {
  display: flex;
  text-align: left;
}
.c0148 {
  direction: rtl;
}
.c0150 {
  cursor: not-allowed;
  opacity: 0.5;
  user-select: none;
}
.c0151 {
  cursor: pointer;
  position: relative;
}
.c0151:hover .c0152 {
  opacity: 1;
}
.c0152 {
  top: -9px;
  left: -9px;
  color: #fff;
  width: 18px;
  height: 18px;
  display: block;
  opacity: 0;
  position: absolute;
  font-size: 0.95em;
  transition: opacity 0.1s ease;
  background: #444;
  text-align: center;
  line-height: 1.1;
  font-family: sans-serif;
  border-radius: 50%;
}
.c0153 {
  margin-left: 10px;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0121 {
  flex: 1;
  color: #444;
  border: 1px solid #ddd;
  margin: 40px auto 0 auto;
  display: flex;
  position: relative;
  flex-wrap: wrap;
  max-width: 675px;
  background: #fff;
  box-shadow: 1px 1px 5px #ddd;
  min-height: 100px;
  font-family: "Lato", "Trebuchet MS", Roboto, Helvetica, Arial, sans-serif;
  align-content: space-between;
  border-radius: 0;
  flex-direction: row;
}
@media(max-width: 52em) {
  .c0121 {
    max-width: 100%;
    min-width: auto;
    margin-top: 60px;
  }
}
.c0122 {
  outline: 2px solid;
}
.c0123 {
  border-color: #4fd364;
  outline-color: #4fd364;
}
.c0124 {
  border-color: #f74c4a;
  outline-color: #f74c4a;
}
.c0125 {
  border-color: #b9b9b9;
  outline-color: #b9b9b9;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0113 {
  color: #fff !important;
  width: 100px;
  height: 100px;
  border: none;
  cursor: pointer;
  display: inline-block;
  border-radius: 0;
  -webkit-appearance: none;
}
.c0113:first-child {
  border-left-width: 4px !important;
}
.c0113:last-child {
  border-right-width: 4px !important;
}
.c0113:focus {
  outline: 1px dotted currentColor;
}
.c0113:focus, .c0113:active {
  transform: translate3D(1px, 1px 0);
}
.c0113[disabled] {
  cursor: not-allowed;
  background: #b9b9b9 !important;
}
.c0114 {
  background: #4fd364 !important;
}
.c0115 {
  background: #f74c4a !important;
}
.c0116 {
  background: #b9b9b9 !important;
}
.c0117 {
  background: #b9b9b9 !important;
}
.c0118 {
  z-index: 10;
  position: relative;
}
</style><style type="text/css" data-jss="" data-meta="t, Themed, Static">
.c0111 {
  width: 100%;
  display: flex;
  flex-wrap: nowrap;
  min-height: 100px;
  align-items: flex-start;
  flex-direction: row;
  justify-content: center;
}
<!-- .c0111 > * {
  border-width: 4px 2px 0 2px !important;
  border-style: solid;
  border-color: #fff;
} -->
.c0112 {
  cursor: not-allowed;
}
</style></head>
<body tabindex="-1">
    <div id="root">
        <aside class="c1155">
            <span></span>
        </aside>
        <div tabindex="-1" class="c1154">
            <main class="c1153" tabindex="1">
                <header class="c1175">
                    <button class="c1176" aria-label="Show sidebar" title="Show sidebar">
                        <svg aria-hidden="true" fill="currentColor" width="20" height="20" viewBox="0 0 24 24">
                            <path d="M3 5h18q0.414 0 0.707 0.293t0.293 0.707-0.293 0.707-0.707 0.293h-18q-0.414 0-0.707-0.293t-0.293-0.707 0.293-0.707 0.707-0.293zM3 17h18q0.414 0 0.707 0.293t0.293 0.707-0.293 0.707-0.707 0.293h-18q-0.414 0-0.707-0.293t-0.293-0.707 0.293-0.707 0.707-0.293zM3 11h18q0.414 0 0.707 0.293t0.293 0.707-0.293 0.707-0.707 0.293h-18q-0.414 0-0.707-0.293t-0.293-0.707 0.293-0.707 0.707-0.293z"></path>
                        </svg>
                    </button>
                    <h2 style="text-align:center;text-weight:bold;">NLP-Tools</h2>
                </header>
                <div class="c1159">
                    <div class="c1161">
                        <header class="c1163">
                            <h2 style="text-align:center;text-weight:bold;">NLP工具集</h2>
                            <div class="c1164"></div>
                        </header>
                        <section class="left_side_main_menu_container">
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">工具选择</div>
                                <select class="c1196" id="tools_select">
                                    <option value="ner" id="ner">命名识别（自动）</option>
                                    <option value="ner_manual" id="ner_manual">命名识别（手动标注）</option>
                                    <option value="pos_manual" id="pos_manual">词性标注（手动）</option>
                                    <option value="dep" id="dep">依赖分析</option>
                                    <option value="textcat" id="textcat">文本分类</option>
                                </select></div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">数据集选择</div>
                                <select class="c1196" id="datasets_select">
                                    {% for dataset in datasets %}
                                        <option value="{{dataset}}" id="{{dataset}}">{{dataset}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </section>

                        <section class="left_side_main_menu_container">
                            <h3 class="left_side_main_menu">项目信息</h3>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">样本总数</div>{{sample_count}}
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">数据包总数</div>{{pcap_count}}
                            </div>
                        </section>
                        
                        <section class="left_side_main_menu_container">
                            <h3 class="left_side_main_menu">样本信息</h3>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">样本记录ID</div>
                                <div id="sample_id">{{display.id}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">数据包Md5</div>
                                <div id="pcap_md5">{{display.pcap_md5}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">负载大小</div>
                                 <div id="payload_size">{{display.payload_size}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">标注词数</div>
                                <div id="word_segmentation_count">{{display.word_tag_count}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">分词总数</div>
                                <div id="word_segmentation_count">{{display.word_segmentation_count}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">最后分词日期</div>
                                <div id="last_segmentation_date">{{display.last_segmentation_date}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">最后标注日期</div>
                                <div id="last_tag_date">{{display.last_tag_date}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">样本创建日期</div>
                                <div id="add_date">{{display.add_date}}</div>
                            </div>
                            <div class="left_side_sub_menu_container">
                                <div class="left_side_sub_menu">样本更新日期</div>
                                <div id="update_date">{{display.update_date}}</div>
                            </div>
                        </section>
                        
                        <section class="left_side_main_menu_container">
                            <h3 class="left_side_main_menu">处理进度</h3>
                            <div class="left_side_sub_menu_container" id="current_sample_progress">
                                <div class="left_side_sub_menu">当前样本</div>
                                <div id="current_sample_progress_value">0/{{display.word_segmentation_count}}</div>
                            </div>
                            <div class="c1178">
                                <progress  id="current_progress" class="c1179" max="100" value="0"></progress>
                                <div  id="current_progress_text" class="c1180">0%</div>
                            </div>
                            <div class="left_side_sub_menu_container" id="total_sample_progress">
                                <div class="left_side_sub_menu">所有样本</div>
                                <div id="total_sample_progress_value">0/{{sample_count}}</div>
                            </div>
                            <div class="c1178">
                                <progress  id="total_progress" class="total_progress" max="100" value="0"></progress>
                                <div  id="total_progress_text" class="c1180">0%</div>
                            </div>
                        </section>
                        
                        <section class="left_side_main_menu_container c1182">
                            <h3 class="left_side_main_menu c1174">历史记录</h3>
                            <div id="history_records_container">
                                <div class="history_records" id="history_records">
                                    <div>样本ID：1, &emsp;数据包名：.</div>
                                    <span class="succeed_history_record">
                                        <svg aria-hidden="true" fill="currentColor" width="18" height="18" viewbox="0 0 24 24">
                                            <path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path>
                                        </svg>
                                    </span>
                                </div>
                                <div class="history_records" id="history_records">
                                    <div>样本ID：2, &emsp;数据包名：.</div>
                                    <span class="failed_history_record">
                                        <svg aria-hidden="true" fill="currentColor" width="18" height="18" viewBox="0 0 24 24">
                                            <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        </section>
                        
                        <footer class="copyright">
                            <a href="" target="_blank">© 2019 APP AI LAB</a>
                            <a href="" target="_blank">(<strong>Aimales</strong> v1.0)</a>
                        </footer>
                    </div>
                </div>
                
                <div class="c1197">
                    <div class="c1198">
                        <div>
                            <div class="prodigy-container c0121 c0119">
                                <div tabindex="-1"></div>
                                <div class="c0145">
                                    <div class="c0155 c0146">
                                        <div tabindex="-1">
                                            <div class="c0156">
                                                <span>
                                                    <input hidden="" type="radio" name="default_label"value="ORG">
                                                    <label  id="default_label" class="c0157 c0158" for="ORG" onclick="highlight(this);">ORG<span class="c0159">1</span></label>
                                                </span>
                                                <span>
                                                    <input hidden="" type="radio" name="label"value="PRODUCT">
                                                        <label  id="PRODUCT" class="c0157" for="PRODUCT" onclick="highlight(this);">PRODUCT<span class="c0159">2</span>
                                                        </label>
                                                </span>
                                                <span>
                                                    <input hidden="" type="radio" name="label" value="DATE">
                                                        <label id="DATE" class="c0157" for="DATE" onclick="highlight(this);">DATE<span class="c0159">3</span>
                                                        </label>
                                                </span>
                                                <span>
                                                    <input hidden="" type="radio" name="label" value="GPE">
                                                        <label id="GPE" class="c0157" for="GPE" onclick="highlight(this);">GPE<span class="c0159">4</span>
                                                        </label>
                                                </span>
                                                <span>
                                                    <input hidden="" type="radio" name="label" value="EVENT">
                                                        <label id="EVENT" class="c0157" for="EVENT" onclick="highlight(this);">EVENT<span class="c0159">5</span>
                                                        </label>
                                                </span>
                                                <span>
                                                    <input hidden="" type="radio" name="label" value="TIME">
                                                        <label id="TIME" class="c0157" for="TIME" onclick="highlight(this);">TIME<span class="c0159">6</span></label>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="prodigy-content">
                                        <div class="c0147" id="words">
                                            <!-- {% if display.is_tagged %}
                                                {% for word in display.word_tag_text %}
                                                    <span class="c2149" id="{{forloop.counter}}" ondblclick="replace(this);">{{word}}</span>
                                                {% endfor %}
                                            {% else %}
                                                {% for word in display.word_segmentation_text %}
                                                    <span class="c2149" id="{{forloop.counter}}" ondblclick="replace(this);">{{word}}</span>
                                                {% endfor %}
                                            {% endif %}-->
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="c0143 prodigy-meta">
                                    <span><strong>样本: </strong>{{display.pcap_name}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <footer class="c11101">
                        <div class="c0111 c0110">
                            <button class="c0113 c0114" aria-label="accept (a)" onclick="submmit();" title="提交">
                                <svg aria-hidden="true" fill="currentColor" width="40" height="40" viewBox="0 0 24 24" class="c0118">
                                    <path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path>
                                </svg>
                            </button>
                            <button class="c0113 c0116" aria-label="ignore (space)" onclick="skip();" title="跳过">
                                <svg aria-hidden="true" fill="currentColor" width="40" height="40" viewBox="0 0 24 24" class="c0118">
                                    <path d="M12 20.016c4.406 0 8.016-3.609 8.016-8.016 0-1.828-0.609-3.563-1.688-4.922l-11.25 11.25c1.359 1.078 3.094 1.688 4.922 1.688zM3.984 12c0 1.828 0.609 3.563 1.688 4.922l11.25-11.25c-1.359-1.078-3.094-1.688-4.922-1.688-4.406 0-8.016 3.609-8.016 8.016zM12 2.016c5.531 0 9.984 4.453 9.984 9.984s-4.453 9.984-9.984 9.984-9.984-4.453-9.984-9.984 4.453-9.984 9.984-9.984z"></path>
                                </svg>
                            </button>
                            <button class="c0113 c0117" aria-label="undo(backspace, del)" onclick="untagall();" title="重置">
                                <svg aria-hidden="true" fill="currentColor" width="40" height="40" viewBox="0 0 24 24" class="c0118">
                                    <path d="M11.016 9l1.406 1.406-3.609 3.609h9.188v-10.031h2.016v12h-11.203l3.609 3.609-1.406 1.406-6-6z"></path>
                                </svg>
                            </button>
                            <button class="c0113 c0115" aria-label="exit (x)" onclick="exit();" title="退出">
                                <svg aria-hidden="true" fill="currentColor" width="40" height="40" viewBox="0 0 24 24" class="c0118">
                                    <path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path>
                                </svg>
                            </button>
                        </div>
                    </footer>
                </div>
            </main>
        </div>
    </div>
    <script>
        // 最大显示的历史记录数量
        var max_history_records = 3;
        
        // 全局当前已编辑样本数量
        var global_sample_index = 0;
        
        // 当前已编辑的样本的索引号
        var tagged_sample_indexes = new Array();
        
        // 当前样本已编辑分词数量
        var current_edit_word_count = 0;

        // 尚未进行标记的样本
        var untagged_sample_indexes = new Array();
        
        // 第一个数据集的所有数据
        var datas = {{ records | safe }};
        
        var default_highlight = document.getElementById("default_label")
        var choosed = default_highlight.previousElementSibling.value;
        function setchoosed(obj){
            choosed = obj.value;
        }
        
        function highlight(obj, tag_label=null){
            default_highlight.setAttribute("class", "c0157");
            default_highlight = obj;
            default_highlight.setAttribute("class", "c0157 c0158");
            if(tag_label){
                choosed = tag_label;
            }else{
                setchoosed(obj.previousElementSibling);
            }
        }
        
        function canceltag(obj){
            var newobj = document.createElement("span");
            newobj.setAttribute("id", obj.parentNode.id);
            newobj.setAttribute("class", "c2149");
            newobj.setAttribute("onclick", "replace(this);");
            newobj.innerText = obj.previousElementSibling.previousElementSibling.innerText;
            obj.parentNode.parentNode.insertBefore(newobj, obj.parentNode);
            obj.parentNode.parentNode.removeChild(obj.parentNode);
            
            current_edit_word_count -= 1;
            refresh_current_progress_bar();
        }
        
        // 获取当前选中的数据集对象
        function get_selected_dataset(){
            var datasets_select = document.getElementById("datasets_select");
            var index = datasets_select.selectedIndex;
            return datasets_select.options[index];
        }
        
        // 获取当前选中的工具对象
        function get_selected_tool(){
            var tools_select = document.getElementById("tools_select");
            var index = tools_select.selectedIndex;
            return tools_select.options[index];
        }

        // 创建已标注单词
        /*function create_tagged_word(id, text, tag){
            var newobj = document.createElement("mark");
            newobj.setAttribute("id", id);
            newobj.setAttribute("class", "c0137 c0151");
            var first_child = document.createElement("span");
            first_child.innerText = text;
            var tag_child = document.createElement("sup");
            tag_child.innerText = tag;
            tag_child.setAttribute("class", "c3157, c2258");
            var third_child = document.createElement("span");
            third_child.setAttribute("class", "delete_button");
            third_child.setAttribute("onclick", "canceltag(this);");
            third_child.innerText = "*";
            newobj.appendChild(first_child);
            newobj.appendChild(tag_child);
            newobj.appendChild(third_child);
            return newobj;
        }*/

        // 创建未标注单词
        function create_untagged_word(id, text){
            var newobj = document.createElement("span");
            newobj.setAttribute("class", "c2149");
            newobj.setAttribute("id", id);
            newobj.setAttribute("ondblclick", "replace(this);")
            newobj.innerHTML = text;
            return newobj;
        }
        
        // 替换需要标注的文本
        function replace_display_text(words, is_tagged=false){
            $("#words").empty();
            var newobj = null;
            var splited_word = null;
            for(j=0, len=words.length;j < len;j++){
                if(is_tagged){
                    current_edit_word_count += 1;
                    splited_word = words[j].split("@");
                    if(splited_word.length == 2){
                        // 这种方式创建的标注没有颜色
                        //newobj = create_tagged_word(j, splited_word[0], splited_word[1]);
                    }
                    newobj = create_untagged_word(j, splited_word[0]);
                }else{
                    newobj = create_untagged_word(j, words[j]);
                }
                document.getElementById("words").appendChild(newobj);
                
                // 配合create_untagged_word实现create_tagged_word效果并且标签带颜色
                if(is_tagged && (splited_word.length == 2)){
                    choosed = splited_word[1];
                    replace(newobj);
                }
            }
        }

        //双击进行标注的操作
        function replace(obj){ 
            var newobj = document.createElement("mark");
            newobj.setAttribute("id", obj.id);
            
            var value_child = document.createElement("span");
            value_child.innerText = obj.innerText;
            newobj.appendChild(value_child);
            
            var label_child = document.createElement("sup");
            label_child.innerText = choosed;
            label_child.setAttribute("class", "c3157 c2258");
            
            var delete_label_child = document.createElement("span");
            delete_label_child.innerText = "*";
            delete_label_child.setAttribute("class", "delete_button");
            delete_label_child.setAttribute("onclick", "canceltag(this);")
            
            newobj.appendChild(label_child);
            newobj.appendChild(delete_label_child);
            newobj.setAttribute("class", "c0137 c0151");
            obj.parentNode.insertBefore(newobj, obj);
            obj.parentNode.removeChild(obj);
            
            current_edit_word_count += 1;
            refresh_current_progress_bar();
        }
        
        // 更新当前样本进度显示
        function refresh_current_progress_bar(){
            var current_sample_progress = document.getElementById("current_sample_progress_value");
            current_sample_progress.innerText = current_edit_word_count + "/" + current_sample_progress.innerText.split("/")[1];
			document.getElementById("current_progress").value = current_edit_word_count*100 / parseInt(current_sample_progress.innerText.split("/")[1]);
            document.getElementById("current_progress_text").innerText = (current_edit_word_count*100 / parseFloat(current_sample_progress.innerText.split("/")[1])).toString() + "%";
        }
		
		// 更新总样本处理进度显示
        function refresh_global_progress_bar(){
            var total_sample_progress = document.getElementById("total_sample_progress_value");
            total_sample_progress.innerText = tagged_sample_indexes.length.toString() + "/" + total_sample_progress.innerText.split("/")[1];
			document.getElementById("total_progress").value = tagged_sample_indexes.length.toString()*100 / parseFloat(total_sample_progress.innerText.split("/")[1]);
            document.getElementById("total_progress_text").innerText = (tagged_sample_indexes.length.toString()*100 / parseFloat(total_sample_progress.innerText.split("/")[1])).toString() + "%";
        }
        
		function add_history_record(is_failed){
            // 提交后，修改界面历史记录
            var new_record = document.createElement("div");
			new_record.setAttribute("class", "history_records");
			new_record.setAttribute("id", "history_records");
			var first_child = document.createElement("div");
			first_child.innerHTML = "样本ID：" + datas[global_sample_index]["id"] + " , &emsp;数据包MD5：" + datas[global_sample_index]["pcap_nmd5"] + ".";
			var second_child = document.createElement("span");
			second_child.setAttribute("class", "succeed_history_record");
            if(!is_failed){
                second_child.innerHTML = '<svg aria-hidden="true" fill="currentColor" width="18" height="18" viewbox="0 0 24 24"><path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path></svg>';
            }else{
                second_child.innerHTML = '<svg aria-hidden="true" fill="currentColor" width="18" height="18" viewBox="0 0 24 24"><path d="M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"></path></svg>';
            }
            /*var svg_child = document.createElement("svg");
			svg_child.setAttribute("aria-hidden", "true");
			svg_child.setAttribute("fill", "currentColor");
			svg_child.setAttribute("width", "18");
			svg_child.setAttribute("height", "18");
			svg_child.setAttribute("viewBox", "0 0 24 24");
            svg_child.innerHTML = '<path d="M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"></path>';
			second_child.appendChild(svg_child);*/
			new_record.appendChild(first_child);
			new_record.appendChild(second_child);
            
            var history_record_container = document.getElementById("history_records_container");
            // 超出指定数量个元素时，先删除前面的，再追加
            if(history_record_container.children.length > max_history_records){
                // 这里removeChild(history_record_container.firstChild)不生效
                history_record_container.removeChild(history_record_container.children[0]);
            }
            history_record_container.appendChild(new_record);
		}
		
        function after_commit(is_failed){
            if(!is_failed){
                tagged_sample_indexes.push(global_sample_index);
            }else{
                untagged_sample_indexes.push(global_sample_index);
            }
            
            // 在样本索引移动前添加历史记录
			add_history_record(is_failed);

            global_sample_index += 1;
            
            // 修改总进度
            if(!is_failed){
			    refresh_global_progress_bar();		
            }	
            
            // 提交后检测是否已遍历完
            if_runout();
        }

        // 更新样本信息
        function redisplay_sample_information(sample_obj){
            document.getElementById("pcap_md5").innerHTML = sample_obj["pcap_md5"];
            document.getElementById("payload_size").innerHTML = sample_obj["payload_size"];
            document.getElementById("word_segmentation_count").innerHTML = sample_obj["word_segmentation_count"];
            document.getElementById("last_segmentation_date").innerHTML = sample_obj["last_segmentation_date"];
            document.getElementById("last_tag_date").innerHTML = sample_obj["last_tag_date"];
            document.getElementById("add_date").innerHTML = sample_obj["add_date"];
            document.getElementById("update_date").innerHTML = sample_obj["update_date"];
            
            document.getElementById("current_sample_progress_value").innerHTML = "0/" + sample_obj["word_segmentation_count"].toString();
            document.getElementById("current_progress").value = 0;
            document.getElementById("current_progress_text").innerText = "0%";
        }
        
        // 点击提交、跳过后会自动触发重新显示数据
        function redisplay_samples(is_traversed){
            if(is_traversed){
                // 使用已标注样本索引容器暂存未标注对象
                tagged_sample_indexes.splice(0, tagged_sample_indexes.length);
                for(j=0;j < untagged_sample_indexes.length;j++){
                    tagged_sample_indexes.push(datas[untagged_sample_indexes[j]]);
                }
                datas = tagged_sample_indexes.slice(0);
                tagged_sample_indexes.splice(0, tagged_sample_indexes.length);
                untagged_sample_indexes.splice(0, untagged_sample_indexes.length);

                global_sample_index = 0;
            }
            
            current_edit_word_count = 0;

            redisplay_sample_information(datas[global_sample_index]);

            if(datas[global_sample_index]["is_tagged"]){
                replace_display_text(datas[global_sample_index]["word_tag_text"].split(" "), true);
            }else{
                replace_display_text(datas[global_sample_index]["word_segmentation_text"].split(" "), false);
            }
        }
        
        // 跳过
        function skip(){
            untagged_sample_indexes.push(global_sample_index);
            // 判断是否已到数据末尾
            global_sample_index += 1;
            if_runout();
        }
        
        // 提交标注
        function submmit(){
            var word_tag_text = "";
            var word_tag_count = 0;
            var wordnodes = document.getElementById("words").children;
            // 分词与其NER以@分割，不同分词以" "(空格)分割。
            for(j=0, len=wordnodes.length; j < len;j++){
                if("MARK" == wordnodes[j].nodeName){
                    word_tag_count += 1;
                    word_tag_text += wordnodes[j].firstChild.innerText + "@" + wordnodes[j].children[1].innerText;
                }else{
                    word_tag_text += wordnodes[j].innerText;
                }
                if(j != len - 1){
                    word_tag_text += " ";
                }
            }
            
            $.ajax({
                type: "POST",
                url: "/aimales/ner_manual_tag/" + get_selected_dataset().innerText + "/edit_tags/" + document.getElementById("sample_id").innerHTML,
                data: {
                    "word_tag_text": word_tag_text,
                    "word_tag_count": word_tag_count,
                },
                dataType: "json",
                complete: function(data, status){
                   //在这里做些事情，假设返回的json数据里有name这个属性
                   //有时候可以直接data.name或者data['name']去访问
                   //但有时候，却要通过var jsonData = eval("("+data.responseText+")");才可以通过jsonData.name访问，而且这种情况下，需要是complete而不是success
                   alert("提交成功");
                   if(status == 'error'){
                       status = true;
                   }else{
                       status = false;
                   }
                   after_commit(status);
                }
           });
        }
        
        // 判断是否已遍历至数据集末尾
        function if_runout(){
            if(global_sample_index >= datas.length){
                if(tagged_sample_indexes.length == datas.length){
                    alert("该数据集的所有样本已标记完毕，请切换数据集或刷新页面！")
                    /*tagged_sample_indexes = new Array();
                    $.ajax({
                        type: "GET",
                        url: "/aimales/datasets/" + get_selected_dataset().innerText + "/is_tagged/" + "0",
                        dataType: "json",
                        complete: function(data, status){
                            datas = JSON.parse(data.responseText);
                            if(status == 'error'){
                                if(confirm("拉取数据出错，重试？")){
                                    continue;
                                }else{
                                    break;
                                }
                            }else{
                                if(datas.length){
                                    // 重置所有变量，刷新页面
                                    redisplay_samples(true);
                                }else{
                                    alert("无新增未标注样本，请切换数据集或刷新页面！");
                                }
                            }
                        }
                    });*/
                }else{
                    if(confirm("已到数据集末尾，尚有未标注样本，是否继续处理这些样本？")){
                        // 已遍历至结尾，尚有未标注样本
                        redisplay_samples(true);
                    }
                }
            }else{
                // 尚未遍历完数据集，不更新全局容器datas
                redisplay_samples(false);
            }
        }
        
        // 撤销
        function untagall(){
            var fathernode = document.getElementById("words");
            var words = fathernode.children;
            var newobj = null;
            var oldobj = null;
            for(j=words.length - 1; j >= 0;j--){
                oldobj = words[j];
                if("MARK" == oldobj.nodeName){
                    newobj = document.createElement("span");
                    newobj.setAttribute("class", "c2149");
                    newobj.setAttribute("id", words[j].id);
                    newobj.setAttribute("onclick", "replace(this);");
                    newobj.innerText = oldobj.firstChild.innerText;
                    fathernode.insertBefore(newobj, oldobj);
                    fathernode.removeChild(oldobj);
                }
            }
        }

        // 退出，返回NLP工具主页
        function exit(){
            window.location.href = "/aimales/nlp_tag_tools.html";
        }

        //初始加载时
        window.onload = function(){
            redisplay_samples(false);
        }
        
        window.ga=window.ga||function(){
            (ga.q=ga.q||[]).push(arguments)
        }; 
        ga.l=+new Date;
        ga('create', 'UA-84293596-3', 'auto'); 
        ga('send', 'pageview');
    </script>
    
    <script async="" src="/static/js/nlp_tag_tool_analytics.js.download"></script>
    <script src="/static/js/nlp_tag_tool_demo.js.download"></script>
    <script src="/static/js/jquery.min.js" />
</body>

    <script>
    </script>
</html>